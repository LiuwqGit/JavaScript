<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>5.6.3Sting类型</title>
</head>
<body>
<script>
    var text = "cat, bat, sat, fat";
    var pattern = /.at/;

    // 与pattern.exec(text)相同
    var matches= text.match(pattern);
    alert(matches.index); //0
    alert(matches[0]);   //"cat"    【与整个模式匹配的第一项】
    alert(pattern.lastIndex);    //0

    //search()方法返回字符串中第一个匹配项的索引
    var pos = text.search(/at/);
    alert(pos); //1

    var result = text.replace("at", "ond");
    alert(result);  //"cond, bat, sat, fat";
    result = text.replace(/at/g, "ond");
    alert(result);  // "cond, bond, sond, fond"

    //$1,匹配第一个捕获组的子字符串。
    result = text.replace(/(.at)/g, "word($1)");
    document.write(result); //word(cat), word(bat), word(sat), word(fat)
    alert(result);  //word(cat), word(bat), word(sat), word(fat)

    function htmlEscape(text) {
        return text.replace(/[<>"$]/g, function(match, pos, originalText) {
            switch (match) {
                case "<":
                    return "$lt;";
                case ">":
                    return "$gt;";
                case "$":
                    return "$amp;";
                case "\"":
                    return "$quot;";
            }
        });
    }
    alert(htmlEscape("<p class=\"greeting\">Hello world!</p>"));
    document.write(htmlEscape("<p class=\"greeting\">Hello world!</p>") + "<br />");
    //$lt;p class=$quot;greeting$quot;$gt;Hello world!$lt;/p$gt;

    var colorText = "red, blue, green, yellow";
    var colors1 = colorText.split(",");     //以逗号分隔
    var colors2 = colorText.split(",", 2);  //以逗号分隔，生成最多两个
    var colors3 = colorText.split(/[^\,]+/);    //匹配非\
    document.write(colors1 + "<br />");     //red, blue, green, yellow
    document.write(colors2 + "<br />");     //red, blue
    document.write(colors3 + "<br />");     //,,,,,,,   //["", ",", ",", ",", ""]
</script>
</body>
</html>